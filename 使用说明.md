# 剪贴板历史工具 - 使用说明

## 📦 安装步骤

### 方式一：使用 DMG 安装包（推荐）

1. **打开安装包**
   - 双击 `剪贴板历史-1.0.0.dmg` 文件
   
2. **安装应用**
   - 将「剪贴板历史.app」拖动到「应用程序」文件夹
   - 等待复制完成

3. **首次运行**
   - 打开「应用程序」文件夹，找到「剪贴板历史」
   - 右键点击应用，选择「打开」（首次运行需要）
   - 点击「打开」确认

### 方式二：直接运行 .app 文件

1. 进入 `build` 目录
2. 双击 `剪贴板历史.app`
3. 如果提示无法打开，右键选择「打开」

---

## ⚙️ 授予必要权限

应用需要**辅助功能权限**才能正常工作，这是必需的步骤：

1. **打开系统设置**
   - 点击菜单栏的  图标
   - 选择「系统设置...」

2. **进入隐私与安全性**
   - 在左侧菜单选择「隐私与安全性」
   - 点击「辅助功能」

3. **添加应用**
   - 点击左下角的 🔒 图标解锁（需要输入密码）
   - 点击「+」按钮
   - 找到并选择「剪贴板历史.app」
   - 确保应用旁边的复选框已勾选 ✅

4. **完成**
   - 点击左下角的 🔒 图标锁定
   - 重启应用（如果已运行）

> ⚠️ **重要提示**: 没有辅助功能权限，快捷键和自动粘贴功能将无法使用！

---

## 🚀 使用方法

### 启动应用

1. 打开「剪贴板历史」应用
2. 应用会在状态栏（菜单栏右侧）显示剪贴板图标 📋
3. 应用会在后台运行，不会显示在 Dock 中

### 基本操作

#### 1️⃣ 自动记录剪贴板

应用启动后会自动监听剪贴板：
- 正常使用 `⌘C` 复制任何内容
- 应用会自动保存到历史记录
- 最多保存 200 条历史记录

支持的内容类型：
- 📝 文本内容
- 🖼️ 图片（PNG、JPEG、TIFF 等）
- 📄 文件和文件夹
- 🔗 URL 链接

#### 2️⃣ 打开历史窗口

**方法一：使用快捷键（推荐）**
- 按 `⌘⌥V`（Command + Option + V）
- 历史窗口会在屏幕底部显示
- 窗口占据屏幕宽度 100%，高度 20%

**方法二：点击状态栏图标**
- 点击状态栏的剪贴板图标
- 选择「显示历史」

**新界面特性：**
- 🖥️ 屏幕底部半透明黑色背景
- ↔️ 历史记录横向排列，从左到右
- 🎴 卡片式展示，更直观清晰
- 🔄 支持横向滚动查看更多历史

#### 3️⃣ 搜索和过滤

1. 打开历史窗口后，光标会自动定位在搜索框
2. 输入关键词实时过滤历史记录
3. 支持模糊搜索
4. 过滤后的结果仍然横向排列

#### 4️⃣ 选择和粘贴

**使用键盘（推荐）：**
- `←` `→` 方向键：左右选择项目（横向滚动）
- `回车`：粘贴选中的内容到当前输入框
- `ESC`：关闭窗口

**使用鼠标：**
- 单击选中项目
- 双击项目即可粘贴

#### 5️⃣ 删除历史项

- 用 `←→` 选中要删除的项目
- 按 `Delete` 或 `Backspace` 键
- 该项目会从历史记录中移除

---

## ⌨️ 快捷键列表

| 快捷键 | 功能 |
|--------|------|
| `⌘⌥V` | 显示/隐藏剪贴板历史窗口（屏幕底部） |
| `←` | 向左选择项目 |
| `→` | 向右选择项目 |
| `回车` | 粘贴选中的项目 |
| `ESC` | 关闭历史窗口 |
| `Delete` / `Backspace` | 删除选中的历史项 |

---

## 🍎 状态栏菜单

点击状态栏的剪贴板图标可以访问：

- **显示历史 (⌘⌥V)** - 在屏幕底部打开历史窗口
- **清空历史** - 删除所有历史记录（需要确认）
- **关于** - 查看应用版本和功能介绍
- **退出** - 退出应用

---

## 💡 使用技巧

### 工作流程示例

1. **快速复制多个内容**
   ```
   选中文本A → ⌘C
   选中文本B → ⌘C
   选中文本C → ⌘C
   ```

2. **按需粘贴**
   ```
   按 ⌘⌥V 打开历史（屏幕底部横向显示）
   使用 ←→ 选择需要的内容
   按回车粘贴
   ```

3. **跨应用复制粘贴**
   - 在浏览器中复制链接
   - 在图片软件中复制图片
   - 在文件管理器中复制文件
   - 使用 `⌘⌥V` 随时访问这些内容（底部横向展示）

### 高效使用建议

- ✅ 将应用设置为登录时自动启动
- ✅ 使用搜索功能快速找到历史内容
- ✅ 定期清空不需要的历史记录
- ✅ 熟记快捷键，提高效率

---

## ❓ 常见问题

### 1. 快捷键 ⌘⌥V 不工作

**原因**：未授予辅助功能权限

**解决方法**：
1. 打开「系统设置」→「隐私与安全性」→「辅助功能」
2. 添加「剪贴板历史」应用并勾选
3. 重启应用

### 2. 应用无法打开

**原因**：macOS Gatekeeper 安全限制

**解决方法**：
1. 右键点击应用，选择「打开」
2. 在弹出的对话框中点击「打开」
3. 或在「系统设置」→「隐私与安全性」中点击「仍要打开」

### 3. 粘贴功能不工作

**可能原因**：
- 缺少辅助功能权限
- 目标应用不支持粘贴
- 某些安全应用（如密码管理器）可能阻止自动粘贴

**解决方法**：
1. 确认已授予辅助功能权限
2. 尝试在其他应用中测试
3. 如果自动粘贴不工作，可以手动选择后用 `⌘V` 粘贴

### 4. 历史记录消失了

**原因**：应用被强制退出或系统崩溃

**解决方法**：
- 应用会在退出时自动保存历史记录
- 尽量使用状态栏菜单正常退出应用
- 历史记录保存在系统的 UserDefaults 中

### 5. 图片质量下降

**说明**：应用保存原始图片数据，不会压缩图片质量

### 6. 如何设置开机自启动

1. 打开「系统设置」
2. 进入「通用」→「登录项」
3. 点击「+」按钮
4. 选择「剪贴板历史.app」
5. 点击「打开」

---

## 🔒 隐私与安全

- ✅ 所有数据保存在本地，不会上传到云端
- ✅ 不会收集任何用户信息
- ✅ 历史记录仅保存在您的电脑上
- ✅ 可随时清空历史记录

---

## 🛠️ 系统要求

- **操作系统**：macOS 11.0 (Big Sur) 或更高版本
- **架构**：仅支持 Apple Silicon（arm64），不支持 Intel x86_64 / Rosetta 2
- **存储空间**：< 5 MB
- **内存**：< 50 MB（运行时）

---

## 📝 更新日志

### 版本 1.0.0（2026-01-08）

**首次发布** 🎉

功能特性：
- ✅ 自动监听并保存剪贴板历史
- ✅ 支持文本、图片、文件、URL
- ✅ 全局快捷键 ⌘⌥V
- ✅ 屏幕底部横向显示（宽度100%，高度20%）
- ✅ 横向滚动卡片式展示
- ✅ 搜索和过滤功能
- ✅ 一键粘贴到输入框
- ✅ 状态栏菜单
- ✅ 历史记录持久化
- ✅ 清空和删除功能

---

## 💬 技术支持

如遇到问题：

1. **检查权限**：确保已授予辅助功能权限
2. **检查系统版本**：macOS 11.0 或更高
3. **重启应用**：退出后重新打开
4. **查看日志**：打开「控制台」应用查看错误信息

---

## 🎓 学习资源

本项目使用的技术：
- **Swift** - 原生编程语言
- **AppKit** - macOS 用户界面框架
- **Carbon** - 全局快捷键监听
- **NSPasteboard** - 剪贴板访问

项目源码位于：`ClipboardHistory/Sources/`

---

**感谢使用剪贴板历史工具！** 🙏

如有建议或反馈，欢迎交流！
